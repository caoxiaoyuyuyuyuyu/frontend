{"version":3,"file":"api.js","sources":["pages/profile/api.js"],"sourcesContent":["/**\r\n * 个人中心API接口\r\n * 包含用户信息、设置、记录、分享等功能\r\n */\r\n\r\nimport { request, uploadFile, getApiUrl } from '../../utils/apiConfig.js';\r\n\r\n/**\r\n * 获取用户信息\r\n * @returns {Promise} 返回用户信息\r\n */\r\nexport const getUserInfo = () => request({ url: '/user/info', method: 'GET' });\r\n\r\n/**\r\n * 更新用户昵称\r\n * @param {String} nickname - 用户昵称\r\n * @returns {Promise} 返回更新结果\r\n */\r\nexport const updateNickname = (nickname) => request({ url: '/user/info', method: 'PUT', data: { nickname } });\r\n\r\n/**\r\n * 上传用户头像\r\n * @param {String} avatarPath - 头像路径\r\n * @returns {Promise} 返回上传结果\r\n */\r\nexport const updateAvatar = (avatarPath) => uploadFile({ url: '/user/avatar', filePath: avatarPath, name: 'avatar' });\r\n\r\n/**\r\n * 获取用户设置\r\n * @returns {Promise} 返回用户设置\r\n */\r\nexport const getUserSettings = () => request({ url: '/user/settings', method: 'GET' });\r\n\r\n/**\r\n * 更新用户设置\r\n * @param {Object} settings - 设置数据\r\n * @returns {Promise} 返回更新结果\r\n */\r\nexport const updateUserSettings = (settings) => request({ url: '/user/settings', method: 'PUT', data: settings });\r\n\r\n/**\r\n * 获取识别记录列表\r\n * @param {Object} params - 请求参数\r\n * @returns {Promise} 返回识别记录\r\n */\r\nexport const getRecords = (params = {}) => request({ url: '/detect/records', method: 'GET', data: params });\r\n\r\n/**\r\n * 获取害虫图片URL\r\n * @param {String} imageName - 图片文件名\r\n * @returns {String} 完整图片URL\r\n */\r\nexport const getImageUrl = (imageName) => {\r\n  if (!imageName) return '';\r\n  return getApiUrl(`/detect/images/${imageName}`);\r\n};\r\n\r\n\r\n/**\r\n * 获取识别记录详情\r\n * @param {String} id - 记录ID\r\n * @returns {Promise} 返回记录详情\r\n */\r\nexport const getRecordDetail = (id) => request({ url: `/user/records/${id}`, method: 'GET' });\r\n\r\n/**\r\n * 删除识别记录\r\n * @param {String} id - 记录ID\r\n * @returns {Promise} 返回删除结果\r\n */\r\nexport const removeRecord = (id) => request({ url: `/user/records/${id}`, method: 'DELETE' });\r\n\r\n/**\r\n * 清空所有识别记录\r\n * @returns {Promise} 返回清空结果\r\n */\r\nexport const clearRecords = () => request({ url: '/user/records/clear-all', method: 'DELETE' });\r\n\r\n/**\r\n * 分享害虫信息\r\n * @param {Object} data - 分享数据\r\n * @returns {Promise} 返回分享结果\r\n */\r\nexport const sharePest = (data) => request({ url: '/user/share', method: 'POST', data });\r\n\r\n/**\r\n * 获取分享历史\r\n * @param {Object} params - 请求参数\r\n * @returns {Promise} 返回分享历史\r\n */\r\nexport const getShareHistory = (params = {}) => request({ url: '/user/share-history', method: 'GET', data: params });\r\n\r\n/**\r\n * 获取帮助信息\r\n * @returns {Promise} 返回帮助信息\r\n */\r\nexport const getHelp = () => request({ url: '/help', method: 'GET' });\r\n\r\n/**\r\n * 退出登录\r\n * @returns {Promise} 返回退出结果\r\n */\r\nexport const logout = () => request({ url: '/user/logout', method: 'POST' });\r\n\r\nexport default {\r\n  getUserInfo,\r\n  updateNickname,\r\n  updateAvatar,\r\n  getUserSettings,\r\n  updateUserSettings,\r\n  getRecords,\r\n  getRecordDetail,\r\n  removeRecord,\r\n  clearRecords,\r\n  sharePest,\r\n  getShareHistory,\r\n  getHelp,\r\n  logout\r\n}; "],"names":["request","getApiUrl"],"mappings":";;AA6CY,MAAC,aAAa,CAAC,SAAS,CAAE,MAAKA,gBAAO,QAAC,EAAE,KAAK,mBAAmB,QAAQ,OAAO,MAAM,OAAM,CAAE;AAO9F,MAAC,cAAc,CAAC,cAAc;AACxC,MAAI,CAAC;AAAW,WAAO;AACvB,SAAOC,gBAAS,UAAC,kBAAkB,SAAS,EAAE;AAChD;;;"}