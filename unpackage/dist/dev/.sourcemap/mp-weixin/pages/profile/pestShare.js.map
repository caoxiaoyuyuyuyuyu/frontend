{"version":3,"file":"pestShare.js","sources":["pages/profile/pestShare.vue","../../HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcHJvZmlsZS9wZXN0U2hhcmUudnVl"],"sourcesContent":["<template>\r\n  <view class=\"pest-share-container\">\r\n    <!-- 上传新害虫 -->\r\n    <view class=\"section\">\r\n      <view class=\"section-title\">上传新害虫</view>\r\n      <view class=\"form-row\">\r\n        <view class=\"form-label\">图片：</view>\r\n        <view class=\"form-upload\" @click=\"chooseImage\">\r\n          <image v-if=\"form.image\" :src=\"form.image\" class=\"upload-img\" />\r\n          <view v-else class=\"upload-placeholder\">点击上传</view>\r\n        </view>\r\n      </view>\r\n      <view class=\"form-row\">\r\n        <view class=\"form-label\">害虫名称：</view>\r\n        <input class=\"form-input\" v-model=\"form.name\" placeholder=\"必填，如：棉铃虫\" />\r\n      </view>\r\n      <view class=\"form-row\">\r\n        <view class=\"form-label\">特征描述：</view>\r\n        <textarea class=\"form-textarea\" v-model=\"form.feature\" placeholder=\"如颜色、大小、触角形态等\" />\r\n      </view>\r\n      <button class=\"submit-btn\" @click=\"submit\">提交审核</button>\r\n    </view>\r\n\r\n    <!-- 贡献记录 -->\r\n    <view class=\"section\">\r\n      <view class=\"section-title\">我的贡献记录</view>\r\n      <view v-if=\"contributions.length === 0\" class=\"empty-tip\">暂无贡献记录</view>\r\n      <view v-for=\"item in contributions\" :key=\"item.id\" class=\"record-row\">\r\n        <image :src=\"getStatusIcon(item.status)\" class=\"status-icon\" />\r\n        <view class=\"record-info\">\r\n          <view class=\"record-title\">{{ item.time }} | {{ item.name }}</view>\r\n          <view class=\"record-status\">\r\n            <text :class=\"statusClass(item.status)\">{{ item.status }}</text>\r\n            <text v-if=\"item.status === '被驳回'\" class=\"reject-reason\">（{{ item.reason }}）</text>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      form: {\r\n        image: '',\r\n        name: '',\r\n        feature: ''\r\n      },\r\n      contributions: [] // 初始为空，用户提交后才有记录\r\n    }\r\n  },\r\n  methods: {\r\n    chooseImage() {\r\n      uni.chooseImage({\r\n        count: 1,\r\n        sizeType: ['compressed'],\r\n        sourceType: ['album', 'camera'],\r\n        success: (res) => {\r\n          this.form.image = res.tempFilePaths[0]\r\n        }\r\n      })\r\n    },\r\n    submit() {\r\n      if (!this.form.image || !this.form.name || !this.form.feature) {\r\n        uni.showToast({ title: '请填写完整信息', icon: 'none' })\r\n        return\r\n      }\r\n      // 添加到贡献记录\r\n      this.contributions.unshift({\r\n        id: Date.now(),\r\n        time: this.getNowTime(),\r\n        name: this.form.name,\r\n        status: '待审核',\r\n        reason: '',\r\n        image: this.form.image\r\n      })\r\n      // 这里可调用后端接口上传内容\r\n      uni.showModal({\r\n        title: '提交成功',\r\n        content: '您的贡献将在一周内审核，通过后获得10积分。',\r\n        showCancel: false\r\n      })\r\n      // 清空表单\r\n      this.form = { image: '', name: '', feature: '' }\r\n    },\r\n    getStatusIcon(status) {\r\n      if (status === '待审核') return '/static/icon_pending.png'\r\n      if (status === '已通过') return '/static/icon_pass.png'\r\n      if (status === '被驳回') return '/static/icon_reject.png'\r\n      return ''\r\n    },\r\n    statusClass(status) {\r\n      if (status === '待审核') return 'status-pending'\r\n      if (status === '已通过') return 'status-pass'\r\n      if (status === '被驳回') return 'status-reject'\r\n      return ''\r\n    },\r\n    getNowTime() {\r\n      const d = new Date()\r\n      const pad = n => n < 10 ? '0' + n : n\r\n      return `${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())} ${pad(d.getHours())}:${pad(d.getMinutes())}`\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.pest-share-container {\r\n  padding: 32rpx 24rpx 32rpx 24rpx;\r\n  background: #f8f9fb;\r\n  min-height: 100vh;\r\n}\r\n.section {\r\n  background: #fff;\r\n  border-radius: 18rpx;\r\n  margin-bottom: 28rpx;\r\n  padding: 28rpx 24rpx;\r\n  box-shadow: 0 2rpx 8rpx #eee;\r\n}\r\n.section-title {\r\n  font-size: 30rpx;\r\n  font-weight: bold;\r\n  color: #2d2e3a;\r\n  margin-bottom: 16rpx;\r\n}\r\n.form-row {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 18rpx;\r\n}\r\n.form-label {\r\n  width: 140rpx;\r\n  font-size: 26rpx;\r\n  color: #666;\r\n}\r\n.form-upload {\r\n  width: 120rpx;\r\n  height: 120rpx;\r\n  background: #f0f0f0;\r\n  border-radius: 12rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  overflow: hidden;\r\n  cursor: pointer;\r\n}\r\n.upload-img {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n}\r\n.upload-placeholder {\r\n  color: #bbb;\r\n  font-size: 24rpx;\r\n}\r\n.form-input {\r\n  flex: 1;\r\n  font-size: 26rpx;\r\n  border: 1rpx solid #eee;\r\n  border-radius: 8rpx;\r\n  padding: 8rpx 12rpx;\r\n  background: #fafafa;\r\n}\r\n.form-textarea {\r\n  flex: 1;\r\n  font-size: 26rpx;\r\n  border: 1rpx solid #eee;\r\n  border-radius: 8rpx;\r\n  padding: 8rpx 12rpx;\r\n  background: #fafafa;\r\n  min-height: 80rpx;\r\n}\r\n.submit-btn {\r\n  width: 100%;\r\n  background: #2d2e3a;\r\n  color: #fff;\r\n  font-size: 28rpx;\r\n  border-radius: 12rpx;\r\n  margin-top: 12rpx;\r\n  padding: 16rpx 0;\r\n}\r\n.empty-tip {\r\n  color: #bbb;\r\n  font-size: 24rpx;\r\n  text-align: center;\r\n  margin: 32rpx 0;\r\n}\r\n.record-row {\r\n  display: flex;\r\n  align-items: center;\r\n  border-bottom: 1rpx solid #f0f0f0;\r\n  padding: 18rpx 0;\r\n}\r\n.status-icon {\r\n  width: 36rpx;\r\n  height: 36rpx;\r\n  margin-right: 18rpx;\r\n}\r\n.record-info {\r\n  flex: 1;\r\n}\r\n.record-title {\r\n  font-size: 26rpx;\r\n  color: #222;\r\n}\r\n.record-status {\r\n  font-size: 24rpx;\r\n  margin-top: 4rpx;\r\n}\r\n.status-pending {\r\n  color: #e5d3b6;\r\n}\r\n.status-pass {\r\n  color: #4caf50;\r\n}\r\n.status-reject {\r\n  color: #f44336;\r\n}\r\n.reject-reason {\r\n  color: #f44336;\r\n  margin-left: 8rpx;\r\n}\r\n</style>","import MiniProgramPage from 'D:/Projects/frontend/pages/profile/pestShare.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AA0CA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,MAAM;AAAA,QACJ,OAAO;AAAA,QACP,MAAM;AAAA,QACN,SAAS;AAAA,MACV;AAAA,MACD,eAAe,CAAG;AAAA;AAAA,IACpB;AAAA,EACD;AAAA,EACD,SAAS;AAAA,IACP,cAAc;AACZA,oBAAAA,MAAI,YAAY;AAAA,QACd,OAAO;AAAA,QACP,UAAU,CAAC,YAAY;AAAA,QACvB,YAAY,CAAC,SAAS,QAAQ;AAAA,QAC9B,SAAS,CAAC,QAAQ;AAChB,eAAK,KAAK,QAAQ,IAAI,cAAc,CAAC;AAAA,QACvC;AAAA,OACD;AAAA,IACF;AAAA,IACD,SAAS;AACP,UAAI,CAAC,KAAK,KAAK,SAAS,CAAC,KAAK,KAAK,QAAQ,CAAC,KAAK,KAAK,SAAS;AAC7DA,sBAAG,MAAC,UAAU,EAAE,OAAO,WAAW,MAAM,QAAQ;AAChD;AAAA,MACF;AAEA,WAAK,cAAc,QAAQ;AAAA,QACzB,IAAI,KAAK,IAAK;AAAA,QACd,MAAM,KAAK,WAAY;AAAA,QACvB,MAAM,KAAK,KAAK;AAAA,QAChB,QAAQ;AAAA,QACR,QAAQ;AAAA,QACR,OAAO,KAAK,KAAK;AAAA,OAClB;AAEDA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,SAAS;AAAA,QACT,YAAY;AAAA,OACb;AAED,WAAK,OAAO,EAAE,OAAO,IAAI,MAAM,IAAI,SAAS,GAAG;AAAA,IAChD;AAAA,IACD,cAAc,QAAQ;AACpB,UAAI,WAAW;AAAO,eAAO;AAC7B,UAAI,WAAW;AAAO,eAAO;AAC7B,UAAI,WAAW;AAAO,eAAO;AAC7B,aAAO;AAAA,IACR;AAAA,IACD,YAAY,QAAQ;AAClB,UAAI,WAAW;AAAO,eAAO;AAC7B,UAAI,WAAW;AAAO,eAAO;AAC7B,UAAI,WAAW;AAAO,eAAO;AAC7B,aAAO;AAAA,IACR;AAAA,IACD,aAAa;AACX,YAAM,IAAI,oBAAI,KAAK;AACnB,YAAM,MAAM,OAAK,IAAI,KAAK,MAAM,IAAI;AACpC,aAAO,GAAG,EAAE,YAAW,CAAE,IAAI,IAAI,EAAE,SAAQ,IAAG,CAAC,CAAC,IAAI,IAAI,EAAE,QAAO,CAAE,CAAC,IAAI,IAAI,EAAE,SAAQ,CAAE,CAAC,IAAI,IAAI,EAAE,WAAU,CAAE,CAAC;AAAA,IAClH;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxGA,GAAG,WAAW,eAAe;"}