{"version":3,"file":"pestShare.js","sources":["pages/profile/pestShare.vue","../../HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcHJvZmlsZS9wZXN0U2hhcmUudnVl"],"sourcesContent":["<template>\n  <view class=\"pest-share-container\">\n    <!-- 上传新害虫 -->\n    <view class=\"section\">\n      <view class=\"section-title\">上传新害虫</view>\n      <view class=\"form-row\">\n        <view class=\"form-label\">图片：</view>\n        <view class=\"form-upload\" @click=\"chooseImage\">\n          <image v-if=\"form.image\" :src=\"form.image\" class=\"upload-img\" />\n          <view v-else class=\"upload-placeholder\">点击上传</view>\n        </view>\n      </view>\n      <view class=\"form-row\">\n        <view class=\"form-label\">害虫名称：</view>\n        <input class=\"form-input\" v-model=\"form.name\" placeholder=\"必填，如：棉铃虫\" />\n      </view>\n      <view class=\"form-row\">\n        <view class=\"form-label\">特征描述：</view>\n        <textarea class=\"form-textarea\" v-model=\"form.feature\" placeholder=\"如颜色、大小、触角形态等\" />\n      </view>\n      <button class=\"submit-btn\" @click=\"submit\">提交审核</button>\n    </view>\n\n    <!-- 贡献记录 -->\n    <view class=\"section\">\n      <view class=\"section-title\">我的贡献记录</view>\n      <view v-if=\"contributions.length === 0\" class=\"empty-tip\">暂无贡献记录</view>\n      <view v-for=\"item in contributions\" :key=\"item.id\" class=\"record-row\">\n        <image :src=\"getStatusIcon(item.status)\" class=\"status-icon\" />\n        <view class=\"record-info\">\n          <view class=\"record-title\">{{ item.time }} | {{ item.name }}</view>\n          <view class=\"record-status\">\n            <text :class=\"statusClass(item.status)\">{{ item.status }}</text>\n            <text v-if=\"item.status === '被驳回'\" class=\"reject-reason\">（{{ item.reason }}）</text>\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      form: {\n        image: '',\n        name: '',\n        feature: ''\n      },\n      contributions: [] // 初始为空，用户提交后才有记录\n    }\n  },\n  methods: {\n    chooseImage() {\n      uni.chooseImage({\n        count: 1,\n        sizeType: ['compressed'],\n        sourceType: ['album', 'camera'],\n        success: (res) => {\n          this.form.image = res.tempFilePaths[0]\n        }\n      })\n    },\n    submit() {\n      if (!this.form.image || !this.form.name || !this.form.feature) {\n        uni.showToast({ title: '请填写完整信息', icon: 'none' })\n        return\n      }\n      // 添加到贡献记录\n      this.contributions.unshift({\n        id: Date.now(),\n        time: this.getNowTime(),\n        name: this.form.name,\n        status: '待审核',\n        reason: '',\n        image: this.form.image\n      })\n      // 这里可调用后端接口上传内容\n      uni.showModal({\n        title: '提交成功',\n        content: '您的贡献将在一周内审核，通过后获得10积分。',\n        showCancel: false\n      })\n      // 清空表单\n      this.form = { image: '', name: '', feature: '' }\n    },\n    getStatusIcon(status) {\n      if (status === '待审核') return '/static/icon_pending.png'\n      if (status === '已通过') return '/static/icon_pass.png'\n      if (status === '被驳回') return '/static/icon_reject.png'\n      return ''\n    },\n    statusClass(status) {\n      if (status === '待审核') return 'status-pending'\n      if (status === '已通过') return 'status-pass'\n      if (status === '被驳回') return 'status-reject'\n      return ''\n    },\n    getNowTime() {\n      const d = new Date()\n      const pad = n => n < 10 ? '0' + n : n\n      return `${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())} ${pad(d.getHours())}:${pad(d.getMinutes())}`\n    }\n  }\n}\n</script>\n\n<style scoped>\n.pest-share-container {\n  padding: 32rpx 24rpx 32rpx 24rpx;\n  background: #f8f9fb;\n  min-height: 100vh;\n}\n.section {\n  background: #fff;\n  border-radius: 18rpx;\n  margin-bottom: 28rpx;\n  padding: 28rpx 24rpx;\n  box-shadow: 0 2rpx 8rpx #eee;\n}\n.section-title {\n  font-size: 30rpx;\n  font-weight: bold;\n  color: #2d2e3a;\n  margin-bottom: 16rpx;\n}\n.form-row {\n  display: flex;\n  align-items: center;\n  margin-bottom: 18rpx;\n}\n.form-label {\n  width: 140rpx;\n  font-size: 26rpx;\n  color: #666;\n}\n.form-upload {\n  width: 120rpx;\n  height: 120rpx;\n  background: #f0f0f0;\n  border-radius: 12rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow: hidden;\n  cursor: pointer;\n}\n.upload-img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n.upload-placeholder {\n  color: #bbb;\n  font-size: 24rpx;\n}\n.form-input {\n  flex: 1;\n  font-size: 26rpx;\n  border: 1rpx solid #eee;\n  border-radius: 8rpx;\n  padding: 8rpx 12rpx;\n  background: #fafafa;\n}\n.form-textarea {\n  flex: 1;\n  font-size: 26rpx;\n  border: 1rpx solid #eee;\n  border-radius: 8rpx;\n  padding: 8rpx 12rpx;\n  background: #fafafa;\n  min-height: 80rpx;\n}\n.submit-btn {\n  width: 100%;\n  background: #2d2e3a;\n  color: #fff;\n  font-size: 28rpx;\n  border-radius: 12rpx;\n  margin-top: 12rpx;\n  padding: 16rpx 0;\n}\n.empty-tip {\n  color: #bbb;\n  font-size: 24rpx;\n  text-align: center;\n  margin: 32rpx 0;\n}\n.record-row {\n  display: flex;\n  align-items: center;\n  border-bottom: 1rpx solid #f0f0f0;\n  padding: 18rpx 0;\n}\n.status-icon {\n  width: 36rpx;\n  height: 36rpx;\n  margin-right: 18rpx;\n}\n.record-info {\n  flex: 1;\n}\n.record-title {\n  font-size: 26rpx;\n  color: #222;\n}\n.record-status {\n  font-size: 24rpx;\n  margin-top: 4rpx;\n}\n.status-pending {\n  color: #e5d3b6;\n}\n.status-pass {\n  color: #4caf50;\n}\n.status-reject {\n  color: #f44336;\n}\n.reject-reason {\n  color: #f44336;\n  margin-left: 8rpx;\n}\n</style>","import MiniProgramPage from 'E:/anyused/empty/frontend/pages/profile/pestShare.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AA0CA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,MAAM;AAAA,QACJ,OAAO;AAAA,QACP,MAAM;AAAA,QACN,SAAS;AAAA,MACV;AAAA,MACD,eAAe,CAAG;AAAA;AAAA,IACpB;AAAA,EACD;AAAA,EACD,SAAS;AAAA,IACP,cAAc;AACZA,oBAAAA,MAAI,YAAY;AAAA,QACd,OAAO;AAAA,QACP,UAAU,CAAC,YAAY;AAAA,QACvB,YAAY,CAAC,SAAS,QAAQ;AAAA,QAC9B,SAAS,CAAC,QAAQ;AAChB,eAAK,KAAK,QAAQ,IAAI,cAAc,CAAC;AAAA,QACvC;AAAA,OACD;AAAA,IACF;AAAA,IACD,SAAS;AACP,UAAI,CAAC,KAAK,KAAK,SAAS,CAAC,KAAK,KAAK,QAAQ,CAAC,KAAK,KAAK,SAAS;AAC7DA,sBAAG,MAAC,UAAU,EAAE,OAAO,WAAW,MAAM,QAAQ;AAChD;AAAA,MACF;AAEA,WAAK,cAAc,QAAQ;AAAA,QACzB,IAAI,KAAK,IAAK;AAAA,QACd,MAAM,KAAK,WAAY;AAAA,QACvB,MAAM,KAAK,KAAK;AAAA,QAChB,QAAQ;AAAA,QACR,QAAQ;AAAA,QACR,OAAO,KAAK,KAAK;AAAA,OAClB;AAEDA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,SAAS;AAAA,QACT,YAAY;AAAA,OACb;AAED,WAAK,OAAO,EAAE,OAAO,IAAI,MAAM,IAAI,SAAS,GAAG;AAAA,IAChD;AAAA,IACD,cAAc,QAAQ;AACpB,UAAI,WAAW;AAAO,eAAO;AAC7B,UAAI,WAAW;AAAO,eAAO;AAC7B,UAAI,WAAW;AAAO,eAAO;AAC7B,aAAO;AAAA,IACR;AAAA,IACD,YAAY,QAAQ;AAClB,UAAI,WAAW;AAAO,eAAO;AAC7B,UAAI,WAAW;AAAO,eAAO;AAC7B,UAAI,WAAW;AAAO,eAAO;AAC7B,aAAO;AAAA,IACR;AAAA,IACD,aAAa;AACX,YAAM,IAAI,oBAAI,KAAK;AACnB,YAAM,MAAM,OAAK,IAAI,KAAK,MAAM,IAAI;AACpC,aAAO,GAAG,EAAE,YAAW,CAAE,IAAI,IAAI,EAAE,SAAQ,IAAG,CAAC,CAAC,IAAI,IAAI,EAAE,QAAO,CAAE,CAAC,IAAI,IAAI,EAAE,SAAQ,CAAE,CAAC,IAAI,IAAI,EAAE,WAAU,CAAE,CAAC;AAAA,IAClH;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxGA,GAAG,WAAW,eAAe;"}