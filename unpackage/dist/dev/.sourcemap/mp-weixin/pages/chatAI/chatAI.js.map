{"version":3,"file":"chatAI.js","sources":["pages/chatAI/chatAI.vue","../../HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY2hhdEFJL2NoYXRBSS52dWU"],"sourcesContent":["<template>\r\n\t<view class=\"chat-container\">\r\n\r\n\t\t\r\n\t\t<!-- È°∂ÈÉ®Ê†áÈ¢òÊ†è -->\r\n\t\t<view class=\"header\">\r\n\t\t\t<view class=\"header-left\">\r\n\t\t\t\t<view class=\"header-btn\" @tap=\"showHistorySidebar\">\r\n\t\t\t\t\t<view class=\"hamburger-icon\">\r\n\t\t\t\t\t\t<view class=\"line\"></view>\r\n\t\t\t\t\t\t<view class=\"line\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"header-center\">\r\n\t\t\t\t<text class=\"title\">Êô∫ÊÖßÂÆ≥Ëô´AIÈóÆÁ≠îÂä©Êâã</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"header-right\">\r\n\t\t\t\t<view class=\"header-btn\" @tap=\"createNewChat\">\r\n\t\t\t\t\t<text class=\"header-icon\">+</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- ÊêúÁ¥¢Ê†è -->\r\n\t\t<view class=\"search-container\">\r\n\t\t\t<view class=\"search-box\">\r\n\t\t\t\t<view class=\"search-icon\">üîç</view>\r\n\t\t\t\t<input \r\n\t\t\t\t\tclass=\"search-input\" \r\n\t\t\t\t\tv-model=\"searchKeyword\" \r\n\t\t\t\t\tplaceholder=\"ÊêúÁ¥¢ÂØπËØùÂÜÖÂÆπ...\"\r\n\t\t\t\t\t@input=\"onSearchInput\"\r\n\t\t\t\t\t@confirm=\"performSearch\"\r\n\t\t\t\t/>\r\n\t\t\t\t<view v-if=\"searchKeyword\" class=\"clear-btn\" @tap=\"clearSearch\">\r\n\t\t\t\t\t<text class=\"clear-icon\">√ó</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- ËÅäÂ§©Ê∂àÊÅØÂàóË°® -->\r\n\t\t<scroll-view \r\n\t\t\tclass=\"chat-list\" \r\n\t\t\tscroll-y=\"true\" \r\n\t\t\t:scroll-top=\"scrollTop\"\r\n\t\t\t:scroll-into-view=\"scrollIntoView\"\r\n\t\t\t:show-scrollbar=\"false\"\r\n\t\t>\r\n\t\t\t<!-- Ê¨¢ËøéÁïåÈù¢ -->\r\n\t\t\t<view v-if=\"messageList.length === 0\" class=\"welcome-container\">\r\n\t\t\t\t<view class=\"welcome-content\">\r\n\t\t\t\t\t<text class=\"welcome-title\">Ê¨¢Ëøé‰ΩøÁî®Êô∫ÊÖßÂÆ≥Ëô´AIÈóÆÁ≠îÂä©Êâã</text>\r\n\t\t\t\t\t<text class=\"welcome-subtitle\">ÊàëÂèØ‰ª•Â∏ÆÊÇ®ËØÜÂà´ÂêÑÁßçÂÆ≥Ëô´Âπ∂Êèê‰æõ‰∏ì‰∏öÂª∫ËÆÆ</text>\r\n\t\t\t\t\t<view class=\"welcome-features\">\r\n\t\t\t\t\t\t<view class=\"feature-item\">\r\n\t\t\t\t\t\t\t<text class=\"feature-text\">Êô∫ËÉΩËØÜÂà´ÂÆ≥Ëô´</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"feature-item\">\r\n\t\t\t\t\t\t\t<text class=\"feature-text\">‰∏ì‰∏öÈò≤Ê≤ªÂª∫ËÆÆ</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"feature-item\">\r\n\t\t\t\t\t\t\t<text class=\"feature-text\">ÊãçÁÖß‰∏ä‰º†ËØÜÂà´</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view \r\n\t\t\t\tv-for=\"(message, index) in messageList\" \r\n\t\t\t\t:key=\"index\"\r\n\t\t\t\t:class=\"['message-item', message.type === 'user' ? 'user-message' : 'ai-message', isMessageHighlighted(message) ? 'highlighted-message' : '']\"\r\n\t\t\t\t:id=\"'msg-' + index\"\r\n\t\t\t>\r\n\t\t\t\t<view class=\"message-content\">\r\n\t\t\t\t\t<view class=\"avatar\">\r\n\t\t\t\t\t\t<image \r\n\t\t\t\t\t\t\t:src=\"message.type === 'user' ? userAvatar : aiAvatar\" \r\n\t\t\t\t\t\t\tclass=\"avatar-img\"\r\n\t\t\t\t\t\t></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"message-bubble\">\r\n\t\t\t\t\t\t<text v-if=\"!message.image\" class=\"message-text\">{{ message.content }}</text>\r\n\t\t\t\t\t\t<image v-if=\"message.image\" :src=\"message.image\" class=\"message-image\" mode=\"aspectFit\"></image>\r\n\t\t\t\t\t\t<text class=\"message-time\">{{ message.time }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- Âä†ËΩΩÁä∂ÊÄÅ -->\r\n\t\t\t<view v-if=\"isLoading\" class=\"loading-message\">\r\n\t\t\t\t<view class=\"message-content\">\r\n\t\t\t\t\t<view class=\"avatar\">\r\n\t\t\t\t\t\t<image :src=\"aiAvatar\" class=\"avatar-img\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"message-bubble\">\r\n\t\t\t\t\t\t<view class=\"typing-indicator\">\r\n\t\t\t\t\t\t\t<view class=\"dot\"></view>\r\n\t\t\t\t\t\t\t<view class=\"dot\"></view>\r\n\t\t\t\t\t\t\t<view class=\"dot\"></view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\t\t\r\n\t\t<!-- Â∫ïÈÉ®ËæìÂÖ•Âå∫Âüü -->\r\n\t\t<view class=\"input-area\">\r\n\t\t\t<view class=\"input-container\">\r\n\t\t\t\t<button \r\n\t\t\t\t\tclass=\"plus-btn\" \r\n\t\t\t\t\t@tap=\"showImageOptions\"\r\n\t\t\t\t\t:disabled=\"isLoading\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<text class=\"plus-icon\">+</text>\r\n\t\t\t\t</button>\r\n\t\t\t\t<input \r\n\t\t\t\t\tclass=\"message-input\" \r\n\t\t\t\t\tv-model=\"inputMessage\" \r\n\t\t\t\t\tplaceholder=\"ËØ∑ËæìÂÖ•ÊÇ®ÁöÑÈóÆÈ¢ò...\"\r\n\t\t\t\t\t:disabled=\"isLoading\"\r\n\t\t\t\t\t@confirm=\"sendMessage\"\r\n\t\t\t\t/>\r\n\t\t\t\t<button \r\n\t\t\t\t\tclass=\"send-btn\" \r\n\t\t\t\t\t:disabled=\"!inputMessage.trim() || isLoading\"\r\n\t\t\t\t\t@tap=\"sendMessage\"\r\n\t\t\t\t>\r\n\t\t\t\t\tÂèëÈÄÅ\r\n\t\t\t\t</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tmessageList: [], // Ê∂àÊÅØÂàóË°®\r\n\t\t\t\tinputMessage: '', // ËæìÂÖ•Ê°ÜÂÜÖÂÆπ\r\n\t\t\t\tisLoading: false, // ÊòØÂê¶Ê≠£Âú®Âä†ËΩΩ\r\n\t\t\t\tscrollTop: 0, // ÊªöÂä®‰ΩçÁΩÆ\r\n\t\t\t\tscrollIntoView: '', // ÊªöÂä®Âà∞ÊåáÂÆöÊ∂àÊÅØ\r\n\t\t\t\tuserAvatar: '/static/logo.png', // Áî®Êà∑Â§¥ÂÉè\r\n\t\t\t\taiAvatar: '/static/logo.png', // AIÂ§¥ÂÉè\r\n\t\t\t\tcurrentChatId: null, // ÂΩìÂâçÂØπËØùID\r\n\t\t\t\thistoryChats: [], // ÂéÜÂè≤ÂØπËØùÂàóË°®\r\n\t\t\t\tsearchKeyword: '', // ÊêúÁ¥¢ÂÖ≥ÈîÆËØç\r\n\t\t\t\tsearchResults: [], // ÊêúÁ¥¢ÁªìÊûú\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\t// È°µÈù¢Âä†ËΩΩÊó∂ÂàùÂßãÂåñÊñ∞ÂØπËØùÁä∂ÊÄÅ\r\n\t\t\tthis.messageList = [];\r\n\t\t\tthis.currentChatId = 'chat' + Date.now();\r\n\t\t\tthis.inputMessage = '';\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\t// Ê£ÄÊü•ÊòØÂê¶Êúâ‰ªéÂéÜÂè≤È°µÈù¢‰º†ÈÄíËøáÊù•ÁöÑÂØπËØùÊï∞ÊçÆ\r\n\t\t\tconst selectedChat = uni.getStorageSync('selectedChat');\r\n\t\t\tif (selectedChat) {\r\n\t\t\t\tconsole.log('Ê£ÄÊµãÂà∞ÂéÜÂè≤ÂØπËØùÊï∞ÊçÆ:', selectedChat);\r\n\t\t\t\tthis.loadChat(selectedChat);\r\n\t\t\t\tuni.removeStorageSync('selectedChat');\r\n\t\t\t} else {\r\n\t\t\t\t// Â¶ÇÊûúÊ≤°ÊúâÈÄâÊã©ÂéÜÂè≤ÂØπËØùÔºåÁ°Æ‰øùÊòØÊñ∞ÁöÑÂØπËØùÁä∂ÊÄÅ\r\n\t\t\t\tif (this.messageList.length === 0) {\r\n\t\t\t\t\tthis.currentChatId = 'chat' + Date.now();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tonHide() {\r\n\t\t\t// È°µÈù¢ÈöêËóèÊó∂‰øùÂ≠òÂΩìÂâçÂØπËØù\r\n\t\t\tif (this.messageList.length > 0) {\r\n\t\t\t\tthis.saveCurrentChat();\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// ÊòæÁ§∫ÂéÜÂè≤‰æßËæπÊ†è\r\n\t\t\tshowHistorySidebar() {\r\n\t\t\t\tconsole.log('showHistorySidebar Ë¢´Ë∞ÉÁî®');\r\n\t\t\t\t// Ë∑≥ËΩ¨Âà∞ÂéÜÂè≤È°µÈù¢\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/chatAI/history'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Âä†ËΩΩÊåáÂÆöÂØπËØù\r\n\t\t\tloadChat(chat) {\r\n\t\t\t\tconsole.log('Âä†ËΩΩÂéÜÂè≤ÂØπËØù:', chat);\r\n\t\t\t\tthis.currentChatId = chat.id;\r\n\t\t\t\tthis.messageList = [...chat.messages];\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t// Âª∂ËøüÊªöÂä®Á°Æ‰øùDOMÂÆåÂÖ®Ê∏≤Êüì\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.scrollToBottom();\r\n\t\t\t\t\t}, 100);\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t// ÊòæÁ§∫Âä†ËΩΩÊàêÂäüÊèêÁ§∫\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: 'ÂØπËØùÂä†ËΩΩÊàêÂäü',\r\n\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\tduration: 1500\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// ÊòæÁ§∫ÂéÜÂè≤ÂØπËØùÂàóË°®\r\n\t\t\tshowHistory() {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: 'ÂéÜÂè≤ÂØπËØùÂäüËÉΩÂºÄÂèë‰∏≠',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t\t// ËøôÈáåÂèØ‰ª•Ë∑≥ËΩ¨Âà∞ÂéÜÂè≤ÂØπËØùÈ°µÈù¢ÊàñÊòæÁ§∫ÂéÜÂè≤ÂØπËØùÂàóË°®\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// ÂàõÂª∫Êñ∞ÂØπËØù\r\n\t\t\tcreateNewChat() {\r\n\t\t\t\t// Â¶ÇÊûúÂΩìÂâçÊúâÂØπËØùÂÜÖÂÆπÔºåËØ¢ÈóÆÊòØÂê¶‰øùÂ≠ò\r\n\t\t\t\tif (this.messageList.length > 0) {\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle: 'ÂàõÂª∫Êñ∞ÂØπËØù',\r\n\t\t\t\t\t\tcontent: 'Á°ÆÂÆöË¶ÅÂºÄÂßãÊñ∞ÁöÑÂØπËØùÂêóÔºüÂΩìÂâçÂØπËØùÂ∞ÜË¢´‰øùÂ≠ò„ÄÇ',\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t// ‰øùÂ≠òÂΩìÂâçÂØπËØùÂà∞ÂéÜÂè≤ËÆ∞ÂΩï\r\n\t\t\t\t\t\t\t\tthis.saveCurrentChat();\r\n\t\t\t\t\t\t\t\tthis.resetToNewChat();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Â¶ÇÊûúÂΩìÂâçÊ≤°ÊúâÂØπËØùÂÜÖÂÆπÔºåÁõ¥Êé•ÂàõÂª∫Êñ∞ÂØπËØù\r\n\t\t\t\t\tthis.resetToNewChat();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// ÈáçÁΩÆ‰∏∫Êñ∞ÂØπËØù\r\n\t\t\tresetToNewChat() {\r\n\t\t\t\tthis.messageList = [];\r\n\t\t\t\t// ÁîüÊàêÊñ∞ÁöÑÂØπËØùIDÔºåÈÅøÂÖçÈáçÂ§ç\r\n\t\t\t\tthis.currentChatId = 'chat' + Date.now();\r\n\t\t\t\tthis.inputMessage = '';\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: 'Â∑≤ÂàõÂª∫Êñ∞ÂØπËØù',\r\n\t\t\t\t\ticon: 'success'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// ‰øùÂ≠òÂΩìÂâçÂØπËØù\r\n\t\t\tsaveCurrentChat() {\r\n\t\t\t\tif (this.messageList.length === 0) return;\r\n\t\t\t\t\r\n\t\t\t\t// Ëé∑ÂèñÂØπËØùÊ†áÈ¢òÔºà‰ΩøÁî®Á¨¨‰∏ÄÊù°Áî®Êà∑Ê∂àÊÅØÔºâ\r\n\t\t\t\tconst userMessages = this.messageList.filter(msg => msg.type === 'user');\r\n\t\t\t\tlet title = 'Êñ∞ÂØπËØù';\r\n\t\t\t\tif (userMessages.length > 0) {\r\n\t\t\t\t\tconst firstUserMessage = userMessages[0];\r\n\t\t\t\t\ttitle = firstUserMessage.content.length > 20 \r\n\t\t\t\t\t\t? firstUserMessage.content.substring(0, 20) + '...' \r\n\t\t\t\t\t\t: firstUserMessage.content;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// Á°Æ‰øùÊúâÂîØ‰∏ÄÁöÑÂØπËØùID\r\n\t\t\t\tconst chatId = this.currentChatId || 'chat' + Date.now();\r\n\t\t\t\t\r\n\t\t\t\tlet historyChats = uni.getStorageSync('historyChats') || [];\r\n\t\t\t\tconst existingChat = historyChats.find(chat => chat.id === chatId);\r\n\t\t\t\t\r\n\t\t\t\t// Ê£ÄÊü•ÊòØÂê¶ÊúâÊñ∞Ê∂àÊÅØ\r\n\t\t\t\tlet hasNewMessages = false;\r\n\t\t\t\tlet lastTime = this.getCurrentDateTime();\r\n\t\t\t\t\r\n\t\t\t\tif (existingChat) {\r\n\t\t\t\t\t// Â¶ÇÊûúÂØπËØùÂ∑≤Â≠òÂú®ÔºåÊ£ÄÊü•Ê∂àÊÅØÊï∞ÈáèÊòØÂê¶Â¢ûÂä†\r\n\t\t\t\t\tif (this.messageList.length > existingChat.messages.length) {\r\n\t\t\t\t\t\thasNewMessages = true;\r\n\t\t\t\t\t\tlastTime = this.getCurrentDateTime(); // ÊúâÊñ∞Ê∂àÊÅØÊó∂Êõ¥Êñ∞Êó∂Èó¥\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// Ê≤°ÊúâÊñ∞Ê∂àÊÅØÔºå‰øùÊåÅÂéüÊó∂Èó¥\r\n\t\t\t\t\t\tlastTime = existingChat.lastTime;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Êñ∞ÂØπËØùÔºå‰ΩøÁî®ÂΩìÂâçÊó∂Èó¥\r\n\t\t\t\t\thasNewMessages = true;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst newChat = {\r\n\t\t\t\t\tid: chatId,\r\n\t\t\t\t\ttitle: title,\r\n\t\t\t\t\tlastTime: lastTime,\r\n\t\t\t\t\tmessages: [...this.messageList]\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\tconst existingIndex = historyChats.findIndex(chat => chat.id === chatId);\r\n\t\t\t\t\r\n\t\t\t\tif (existingIndex >= 0) {\r\n\t\t\t\t\t// Êõ¥Êñ∞Áé∞ÊúâÂØπËØù\r\n\t\t\t\t\thistoryChats[existingIndex] = newChat;\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Âè™ÊúâÂú®ÊúâÊñ∞Ê∂àÊÅØÊó∂ÊâçÈáçÊñ∞ÊéíÂ∫è\r\n\t\t\t\t\tif (hasNewMessages) {\r\n\t\t\t\t\t\t// Â∞ÜÊõ¥Êñ∞ÁöÑÂØπËØùÁßªÂà∞ÊúÄÂâçÈù¢\r\n\t\t\t\t\t\thistoryChats.splice(existingIndex, 1);\r\n\t\t\t\t\t\thistoryChats.unshift(newChat);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Ê∑ªÂä†Êñ∞ÂØπËØùÂà∞ÊúÄÂâçÈù¢\r\n\t\t\t\t\thistoryChats.unshift(newChat);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tuni.setStorageSync('historyChats', historyChats);\r\n\t\t\t\tconsole.log('ÂØπËØùÂ∑≤‰øùÂ≠ò:', newChat, 'ÊúâÊñ∞Ê∂àÊÅØ:', hasNewMessages);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// ÊòæÁ§∫ÂõæÁâáÈÄâÊã©ÈÄâÈ°π\r\n\t\t\tshowImageOptions() {\r\n\t\t\t\tuni.showActionSheet({\r\n\t\t\t\t\titemList: ['ÊãçÁÖß', '‰ªéÁõ∏ÂÜåÈÄâÊã©'],\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.tapIndex === 0) {\r\n\t\t\t\t\t\t\tthis.takePhoto();\r\n\t\t\t\t\t\t} else if (res.tapIndex === 1) {\r\n\t\t\t\t\t\t\tthis.chooseImage();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// ÊãçÁÖß\r\n\t\t\ttakePhoto() {\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount: 1,\r\n\t\t\t\t\tsourceType: ['camera'],\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tthis.handleImageSelected(res.tempFilePaths[0]);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tconsole.log('ÊãçÁÖßÂ§±Ë¥•:', err);\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: 'ÊãçÁÖßÂ§±Ë¥•',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// ‰ªéÁõ∏ÂÜåÈÄâÊã©ÂõæÁâá\r\n\t\t\tchooseImage() {\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount: 1,\r\n\t\t\t\t\tsourceType: ['album'],\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tthis.handleImageSelected(res.tempFilePaths[0]);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tconsole.log('ÈÄâÊã©ÂõæÁâáÂ§±Ë¥•:', err);\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: 'ÈÄâÊã©ÂõæÁâáÂ§±Ë¥•',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Â§ÑÁêÜÈÄâ‰∏≠ÁöÑÂõæÁâá\r\n\t\t\thandleImageSelected(imagePath) {\r\n\t\t\t\t// Ê∑ªÂä†Áî®Êà∑ÂõæÁâáÊ∂àÊÅØ\r\n\t\t\t\tthis.addMessage({\r\n\t\t\t\t\ttype: 'user',\r\n\t\t\t\t\tcontent: '[ÂõæÁâá]',\r\n\t\t\t\t\ttime: this.getCurrentTime(),\r\n\t\t\t\t\timage: imagePath\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t// ÊòæÁ§∫Âä†ËΩΩÁä∂ÊÄÅ\r\n\t\t\t\tthis.isLoading = true;\r\n\t\t\t\t\r\n\t\t\t\t// Ê®°ÊãüAIËØÜÂà´ÂõûÂ§ç\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.getImageAnalysis(imagePath);\r\n\t\t\t\t}, 1500);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Ëé∑ÂèñÂõæÁâáÂàÜÊûêÁªìÊûú\r\n\t\t\tgetImageAnalysis(imagePath) {\r\n\t\t\t\t// ËøôÈáåÂ∫îËØ•Ë∞ÉÁî®ÁúüÂÆûÁöÑAIÂõæÂÉèËØÜÂà´API\r\n\t\t\t\t// ÁõÆÂâç‰ΩøÁî®Ê®°ÊãüÂõûÂ§ç\r\n\t\t\t\tconst responses = [\r\n\t\t\t\t\t'Ê†πÊçÆÂõæÁâáÂàÜÊûêÔºåËøôÂèØËÉΩÊòØÊüêÁßçÂÆ≥Ëô´„ÄÇÂª∫ËÆÆÊÇ®ÈááÂèñÁõ∏Â∫îÁöÑÈò≤Ê≤ªÊé™ÊñΩ„ÄÇ',\r\n\t\t\t\t\t'ÂõæÁâá‰∏≠ÁöÑÂÆ≥Ëô´ÁâπÂæÅÊòéÊòæÔºåÂª∫ËÆÆ‰ΩøÁî®‰∏ì‰∏öÊùÄËô´ÂâÇËøõË°åÂ§ÑÁêÜ„ÄÇ',\r\n\t\t\t\t\t'ËøôÁúãËµ∑Êù•ÂÉèÊòØÂ∏∏ËßÅÁöÑÂÜú‰∏öÂÆ≥Ëô´ÔºåÈúÄË¶ÅÂèäÊó∂Èò≤Ê≤ª‰ª•ÈÅøÂÖçÊâ©Êï£„ÄÇ'\r\n\t\t\t\t];\r\n\t\t\t\t\r\n\t\t\t\tconst randomResponse = responses[Math.floor(Math.random() * responses.length)];\r\n\t\t\t\t\r\n\t\t\t\t// Ê∑ªÂä†AIÂõûÂ§ç\r\n\t\t\t\tthis.addMessage({\r\n\t\t\t\t\ttype: 'ai',\r\n\t\t\t\t\tcontent: randomResponse,\r\n\t\t\t\t\ttime: this.getCurrentTime()\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tthis.isLoading = false;\r\n\t\t\t\t\r\n\t\t\t\t// ‰øùÂ≠òÂØπËØùÂà∞ÂéÜÂè≤ËÆ∞ÂΩï\r\n\t\t\t\tthis.saveCurrentChat();\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// ÂèëÈÄÅÊ∂àÊÅØ\r\n\t\t\tsendMessage() {\r\n\t\t\t\tif (!this.inputMessage.trim() || this.isLoading) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// Ê∑ªÂä†Áî®Êà∑Ê∂àÊÅØ\r\n\t\t\t\tthis.addMessage({\r\n\t\t\t\t\ttype: 'user',\r\n\t\t\t\t\tcontent: this.inputMessage,\r\n\t\t\t\t\ttime: this.getCurrentTime()\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tconst userQuestion = this.inputMessage;\r\n\t\t\t\tthis.inputMessage = '';\r\n\t\t\t\t\r\n\t\t\t\t// ÊòæÁ§∫Âä†ËΩΩÁä∂ÊÄÅ\r\n\t\t\t\tthis.isLoading = true;\r\n\t\t\t\t\r\n\t\t\t\t// Ê®°ÊãüAIÂõûÂ§çÔºàÂÆûÈôÖÈ°πÁõÆ‰∏≠Â∫îËØ•Ë∞ÉÁî®ÁúüÂÆûÁöÑAPIÔºâ\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.getAIResponse(userQuestion);\r\n\t\t\t\t}, 1000);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Ëé∑ÂèñAIÂõûÂ§ç\r\n\t\t\tgetAIResponse(question) {\r\n\t\t\t\t// ËøôÈáåÂ∫îËØ•Ë∞ÉÁî®ÁúüÂÆûÁöÑAI API\r\n\t\t\t\t// ÁõÆÂâç‰ΩøÁî®Ê®°ÊãüÂõûÂ§ç\r\n\t\t\t\tlet response = '';\r\n\t\t\t\t\r\n\t\t\t\tif (question.includes('ËØÜÂà´') || question.includes('ÂÆ≥Ëô´')) {\r\n\t\t\t\t\tresponse = 'ÊàëÂèØ‰ª•Â∏ÆÊÇ®ËØÜÂà´ÂêÑÁßçÂÆ≥Ëô´„ÄÇËØ∑‰∏ä‰º†ÂÆ≥Ëô´ÂõæÁâáÔºåÊàë‰ºö‰∏∫ÊÇ®ÂàÜÊûêÂÆ≥Ëô´Á±ªÂûãÂπ∂Êèê‰æõÈò≤Ê≤ªÂª∫ËÆÆ„ÄÇ';\r\n\t\t\t\t} else if (question.includes('Èò≤Ê≤ª') || question.includes('Â§ÑÁêÜ')) {\r\n\t\t\t\t\tresponse = 'ÈíàÂØπ‰∏çÂêåÂÆ≥Ëô´ÔºåÊàë‰ª¨Êúâ‰∏çÂêåÁöÑÈò≤Ê≤ªÊñπÊ≥ï„ÄÇÂª∫ËÆÆÊÇ®ÂÖà‰∏ä‰º†ÂÆ≥Ëô´ÂõæÁâáËøõË°åËØÜÂà´ÔºåÁÑ∂ÂêéÊàë‰ºö‰∏∫ÊÇ®Êèê‰æõÂÖ∑‰ΩìÁöÑÈò≤Ê≤ªÊñπÊ°à„ÄÇ';\r\n\t\t\t\t} else if (question.includes('ÂõæÁâá') || question.includes('‰∏ä‰º†')) {\r\n\t\t\t\t\tresponse = 'ÊÇ®ÂèØ‰ª•ÈÄöËøáÁÇπÂáªËæìÂÖ•Ê°ÜÊóÅËæπÁöÑÂä†Âè∑ÊåâÈíÆÊù•‰∏ä‰º†ÂÆ≥Ëô´ÂõæÁâá„ÄÇÊîØÊåÅÊãçÁÖßÂíå‰ªéÁõ∏ÂÜåÈÄâÊã©ÂõæÁâá„ÄÇ';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresponse = 'ÊàëÊòØ‰∏ì‰∏öÁöÑÂÆ≥Ëô´ËØÜÂà´Âä©ÊâãÔºåÂèØ‰ª•Â∏ÆÊÇ®ËØÜÂà´ÂÆ≥Ëô´„ÄÅÊèê‰æõÈò≤Ê≤ªÂª∫ËÆÆ„ÄÇËØ∑ÂëäËØâÊàëÊÇ®ÈúÄË¶Å‰ªÄ‰πàÂ∏ÆÂä©ÔºåÊàñËÄÖ‰∏ä‰º†ÂÆ≥Ëô´ÂõæÁâáËøõË°åËØÜÂà´„ÄÇ';\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// Ê∑ªÂä†AIÂõûÂ§ç\r\n\t\t\t\tthis.addMessage({\r\n\t\t\t\t\ttype: 'ai',\r\n\t\t\t\t\tcontent: response,\r\n\t\t\t\t\ttime: this.getCurrentTime()\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tthis.isLoading = false;\r\n\t\t\t\t\r\n\t\t\t\t// ‰øùÂ≠òÂØπËØùÂà∞ÂéÜÂè≤ËÆ∞ÂΩïÔºàÂè™ÊúâÂú®ÊúâÊñ∞Ê∂àÊÅØÊó∂ÊâçÊõ¥Êñ∞Ôºâ\r\n\t\t\t\tthis.saveCurrentChat();\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Ê∑ªÂä†Ê∂àÊÅØÂà∞ÂàóË°®\r\n\t\t\taddMessage(message) {\r\n\t\t\t\tthis.messageList.push(message);\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t// Âª∂ËøüÊªöÂä®Á°Æ‰øùÊñ∞Ê∂àÊÅØÂÆåÂÖ®Ê∏≤Êüì\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.scrollToBottom();\r\n\t\t\t\t\t}, 100);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// ÊªöÂä®Âà∞Â∫ïÈÉ®\r\n\t\t\tscrollToBottom() {\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t// ‰ΩøÁî®scroll-into-viewÊªöÂä®Âà∞ÊúÄÂêé‰∏Ä‰∏™Ê∂àÊÅØ\r\n\t\t\t\t\tif (this.messageList.length > 0) {\r\n\t\t\t\t\t\tconst lastIndex = this.messageList.length - 1;\r\n\t\t\t\t\t\tthis.scrollIntoView = `msg-${lastIndex}`;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// Â¶ÇÊûúÊ≤°ÊúâÊ∂àÊÅØÔºåÊªöÂä®Âà∞È°∂ÈÉ®\r\n\t\t\t\t\t\tthis.scrollTop = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Ëé∑ÂèñÂΩìÂâçÊó∂Èó¥\r\n\t\t\tgetCurrentTime() {\r\n\t\t\t\tconst now = new Date();\r\n\t\t\t\tconst hours = now.getHours().toString().padStart(2, '0');\r\n\t\t\t\tconst minutes = now.getMinutes().toString().padStart(2, '0');\r\n\t\t\t\treturn `${hours}:${minutes}`;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Ëé∑ÂèñÂΩìÂâçÊó•ÊúüÊó∂Èó¥\r\n\t\t\tgetCurrentDateTime() {\r\n\t\t\t\tconst now = new Date();\r\n\t\t\t\tconst year = now.getFullYear();\r\n\t\t\t\tconst month = (now.getMonth() + 1).toString().padStart(2, '0');\r\n\t\t\t\tconst day = now.getDate().toString().padStart(2, '0');\r\n\t\t\t\tconst hours = now.getHours().toString().padStart(2, '0');\r\n\t\t\t\tconst minutes = now.getMinutes().toString().padStart(2, '0');\r\n\t\t\t\treturn `${year}-${month}-${day} ${hours}:${minutes}`;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// ÊêúÁ¥¢ËæìÂÖ•Â§ÑÁêÜ\r\n\t\t\tonSearchInput() {\r\n\t\t\t\tif (this.searchKeyword.trim()) {\r\n\t\t\t\t\tthis.performSearch();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.clearSearch();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// ÊâßË°åÊêúÁ¥¢\r\n\t\t\tperformSearch() {\r\n\t\t\t\tif (!this.searchKeyword.trim()) {\r\n\t\t\t\t\tthis.clearSearch();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst keyword = this.searchKeyword.toLowerCase();\r\n\t\t\t\tthis.searchResults = [];\r\n\t\t\t\t\r\n\t\t\t\tthis.messageList.forEach((message, index) => {\r\n\t\t\t\t\tif (message.content && message.content.toLowerCase().includes(keyword)) {\r\n\t\t\t\t\t\tthis.searchResults.push(index);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tif (this.searchResults.length > 0) {\r\n\t\t\t\t\t// ÊªöÂä®Âà∞Á¨¨‰∏Ä‰∏™ÊêúÁ¥¢ÁªìÊûú\r\n\t\t\t\t\tthis.scrollToMessage(this.searchResults[0]);\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: `ÊâæÂà∞ ${this.searchResults.length} ‰∏™ÁªìÊûú`,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: 'Êú™ÊâæÂà∞Áõ∏ÂÖ≥ÂÜÖÂÆπ',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Ê∏ÖÈô§ÊêúÁ¥¢\r\n\t\t\tclearSearch() {\r\n\t\t\t\tthis.searchKeyword = '';\r\n\t\t\t\tthis.searchResults = [];\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// Ê£ÄÊü•Ê∂àÊÅØÊòØÂê¶È´ò‰∫Æ\r\n\t\t\tisMessageHighlighted(message) {\r\n\t\t\t\tif (!this.searchKeyword.trim()) return false;\r\n\t\t\t\tconst index = this.messageList.indexOf(message);\r\n\t\t\t\treturn this.searchResults.includes(index);\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// È´ò‰∫ÆÊêúÁ¥¢ÊñáÊú¨ÔºàÂ∑≤ÁßªÈô§ÔºåÊîπÁî®CSSÊ†∑ÂºèÂÆûÁé∞Ôºâ\r\n\t\t\thighlightSearchText(text) {\r\n\t\t\t\treturn text; // Áõ¥Êé•ËøîÂõûÂéüÊñáÊú¨Ôºå‰ΩøÁî®CSSÊ†∑ÂºèÂÆûÁé∞È´ò‰∫Æ\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// ÊªöÂä®Âà∞ÊåáÂÆöÊ∂àÊÅØ\r\n\t\t\tscrollToMessage(index) {\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tthis.scrollIntoView = `msg-${index}`;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t.chat-container {\r\n\t\theight: 100vh;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tbackground-color: #f5f5f5;\r\n\t\tposition: relative;\r\n\t\twidth: 100%;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\t\r\n\t.header {\r\n\t\tbackground-color: #4CAF50;\r\n\t\tpadding: 20rpx 30rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tbox-shadow: 0 2rpx 10rpx rgba(0,0,0,0.1);\r\n\t}\r\n\t\r\n\t.header-left, .header-right {\r\n\t\twidth: 80rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t}\r\n\t\r\n\t.header-center {\r\n\t\tflex: 1;\r\n\t\ttext-align: center;\r\n\t}\r\n\t\r\n\t.header-btn {\r\n\t\twidth: 60rpx;\r\n\t\theight: 60rpx;\r\n\t\tbackground: rgba(255,255,255,0.2);\r\n\t\tborder: none;\r\n\t\tborder-radius: 50%;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tcursor: pointer;\r\n\t\ttransition: all 0.3s ease;\r\n\t}\r\n\t\r\n\t.header-btn:active {\r\n\t\tbackground: rgba(255,255,255,0.3);\r\n\t\ttransform: scale(0.95);\r\n\t}\r\n\t\r\n\t.header-icon {\r\n\t\tcolor: white;\r\n\t\tfont-size: 28rpx;\r\n\t}\r\n\t\r\n\t.hamburger-icon {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tgap: 4rpx;\r\n\t}\r\n\t\r\n\t.line {\r\n\t\twidth: 24rpx;\r\n\t\theight: 3rpx;\r\n\t\tbackground-color: #333;\r\n\t\tborder-radius: 2rpx;\r\n\t}\r\n\t\r\n\t.title {\r\n\t\tcolor: white;\r\n\t\tfont-size: 36rpx;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\t\r\n\t.search-container {\r\n\t\tbackground-color: white;\r\n\t\tpadding: 20rpx 30rpx;\r\n\t\tborder-bottom: 1rpx solid #e0e0e0;\r\n\t}\r\n\t\r\n\t.search-box {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tbackground-color: #f5f5f5;\r\n\t\tborder-radius: 25rpx;\r\n\t\tpadding: 15rpx 20rpx;\r\n\t\tposition: relative;\r\n\t}\r\n\t\r\n\t.search-icon {\r\n\t\tfont-size: 28rpx;\r\n\t\tmargin-right: 15rpx;\r\n\t\tcolor: #999;\r\n\t}\r\n\t\r\n\t.search-input {\r\n\t\tflex: 1;\r\n\t\tfont-size: 28rpx;\r\n\t\tbackground: transparent;\r\n\t\tborder: none;\r\n\t\toutline: none;\r\n\t}\r\n\t\r\n\t.clear-btn {\r\n\t\twidth: 40rpx;\r\n\t\theight: 40rpx;\r\n\t\tbackground-color: #ccc;\r\n\t\tborder-radius: 50%;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tmargin-left: 15rpx;\r\n\t}\r\n\t\r\n\t.clear-icon {\r\n\t\tcolor: white;\r\n\t\tfont-size: 24rpx;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\t\r\n\t.chat-list {\r\n\t\tflex: 1;\r\n\t\tpadding: 20rpx;\r\n\t\toverflow-y: auto;\r\n\t\twidth: 100%;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\t\r\n\t.welcome-container {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tmin-height: 60vh;\r\n\t\tpadding: 40rpx;\r\n\t}\r\n\t\r\n\t.welcome-content {\r\n\t\ttext-align: center;\r\n\t\tbackground: white;\r\n\t\tborder-radius: 20rpx;\r\n\t\tpadding: 60rpx 40rpx;\r\n\t\tbox-shadow: 0 4rpx 20rpx rgba(0,0,0,0.1);\r\n\t\tmax-width: 600rpx;\r\n\t}\r\n\t\r\n\t.welcome-title {\r\n\t\tfont-size: 36rpx;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #333;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\tdisplay: block;\r\n\t}\r\n\t\r\n\t.welcome-subtitle {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #666;\r\n\t\tmargin-bottom: 40rpx;\r\n\t\tdisplay: block;\r\n\t}\r\n\t\r\n\t.welcome-features {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 20rpx;\r\n\t}\r\n\t\r\n\t.feature-item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tpadding: 20rpx;\r\n\t\tbackground: #f8f8f8;\r\n\t\tborder-radius: 15rpx;\r\n\t}\r\n\t\r\n\t.feature-text {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #333;\r\n\t}\r\n\t\r\n\t.message-item {\r\n\t\tmargin-bottom: 30rpx;\r\n\t}\r\n\t\r\n\t.message-content {\r\n\t\tdisplay: flex;\r\n\t\talign-items: flex-start;\r\n\t}\r\n\t\r\n\t.user-message .message-content {\r\n\t\tflex-direction: row-reverse;\r\n\t}\r\n\t\r\n\t.avatar {\r\n\t\twidth: 80rpx;\r\n\t\theight: 80rpx;\r\n\t\tborder-radius: 50%;\r\n\t\toverflow: hidden;\r\n\t\tmargin: 0 20rpx;\r\n\t}\r\n\t\r\n\t.avatar-img {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\t\r\n\t.message-bubble {\r\n\t\tmax-width: 70%;\r\n\t\tpadding: 20rpx 30rpx;\r\n\t\tborder-radius: 20rpx;\r\n\t\tposition: relative;\r\n\t\tword-wrap: break-word;\r\n\t\tword-break: break-word;\r\n\t}\r\n\t\r\n\t.user-message .message-bubble {\r\n\t\tbackground-color: #4CAF50;\r\n\t\tcolor: white;\r\n\t\tborder-bottom-right-radius: 5rpx;\r\n\t}\r\n\t\r\n\t.ai-message .message-bubble {\r\n\t\tbackground-color: white;\r\n\t\tcolor: #333;\r\n\t\tborder-bottom-left-radius: 5rpx;\r\n\t\tbox-shadow: 0 2rpx 10rpx rgba(0,0,0,0.1);\r\n\t}\r\n\t\r\n\t.message-text {\r\n\t\tfont-size: 28rpx;\r\n\t\tline-height: 1.5;\r\n\t\tword-wrap: break-word;\r\n\t}\r\n\t\r\n\t.message-image {\r\n\t\tmax-width: 100%;\r\n\t\tmax-height: 400rpx;\r\n\t\tborder-radius: 10rpx;\r\n\t\tmargin-bottom: 10rpx;\r\n\t}\r\n\t\r\n\t.message-time {\r\n\t\tfont-size: 24rpx;\r\n\t\topacity: 0.7;\r\n\t\tmargin-top: 10rpx;\r\n\t\tdisplay: block;\r\n\t}\r\n\t\r\n\t.loading-message {\r\n\t\tmargin-bottom: 30rpx;\r\n\t}\r\n\t\r\n\t.typing-indicator {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tpadding: 10rpx 0;\r\n\t}\r\n\t\r\n\t.dot {\r\n\t\twidth: 8rpx;\r\n\t\theight: 8rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tbackground-color: #999;\r\n\t\tmargin: 0 4rpx;\r\n\t\tanimation: typing 1.4s infinite ease-in-out;\r\n\t}\r\n\t\r\n\t.dot:nth-child(1) {\r\n\t\tanimation-delay: -0.32s;\r\n\t}\r\n\t\r\n\t.dot:nth-child(2) {\r\n\t\tanimation-delay: -0.16s;\r\n\t}\r\n\t\r\n\t@keyframes typing {\r\n\t\t0%, 80%, 100% {\r\n\t\t\ttransform: scale(0.8);\r\n\t\t\topacity: 0.5;\r\n\t\t}\r\n\t\t40% {\r\n\t\t\ttransform: scale(1);\r\n\t\t\topacity: 1;\r\n\t\t}\r\n\t}\r\n\t\r\n\t.input-area {\r\n\t\tbackground-color: white;\r\n\t\tpadding: 20rpx 30rpx;\r\n\t\tborder-top: 1rpx solid #e0e0e0;\r\n\t}\r\n\t\r\n\t.input-container {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\t\r\n\t.plus-btn {\r\n\t\twidth: 80rpx;\r\n\t\theight: 80rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tbackground-color: white;\r\n\t\tborder: 2rpx solid #4CAF50;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tmargin-right: 20rpx;\r\n\t}\r\n\t\r\n\t.plus-btn[disabled] {\r\n\t\tbackground-color: #ccc;\r\n\t}\r\n\t\r\n\t.plus-icon {\r\n\t\tcolor: #4CAF50;\r\n\t\tfont-size: 40rpx;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\t\r\n\t.message-input {\r\n\t\tflex: 1;\r\n\t\theight: 80rpx;\r\n\t\tpadding: 0 20rpx;\r\n\t\tborder: 1rpx solid #e0e0e0;\r\n\t\tborder-radius: 40rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\tbackground-color: #f9f9f9;\r\n\t}\r\n\t\r\n\t.send-btn {\r\n\t\tmargin-left: 20rpx;\r\n\t\theight: 80rpx;\r\n\t\tline-height: 80rpx;\r\n\t\tpadding: 0 40rpx;\r\n\t\tbackground-color: #4CAF50;\r\n\t\tcolor: white;\r\n\t\tborder-radius: 40rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\tborder: none;\r\n\t}\r\n\t\r\n\t.send-btn[disabled] {\r\n\t\tbackground-color: #ccc;\r\n\t\tcolor: #999;\r\n\t}\r\n\t\r\n\t.highlighted-message {\r\n\t\tbackground-color: rgba(255, 215, 0, 0.2);\r\n\t\tborder: 2rpx solid #ffd700;\r\n\t\tborder-radius: 10rpx;\r\n\t\tbox-shadow: 0 0 10rpx rgba(255, 215, 0, 0.3);\r\n\t}\r\n\t\r\n\t.highlighted-message .message-bubble {\r\n\t\tbackground-color: rgba(255, 215, 0, 0.1);\r\n\t}\r\n</style>\r\n\r\n","import MiniProgramPage from 'D:/Projects/frontend/pages/chatAI/chatAI.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":"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"}