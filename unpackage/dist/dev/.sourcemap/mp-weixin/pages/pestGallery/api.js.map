{"version":3,"file":"api.js","sources":["pages/pestGallery/api.js"],"sourcesContent":["/**\r\n * 害虫图库API接口\r\n * 根据Vue文件需求编写\r\n */\r\n\r\n// 基础配置\r\nconst BASE_URL = 'http://192.168.241.56:5000'; // 替换为实际的API地址\r\nconst API_VERSION = 'api';\r\n\r\n/**\r\n * 获取害虫列表\r\n * @param {Object} params - 请求参数\r\n * @param {Number} params.page - 页码\r\n * @param {Number} params.per_page - 每页数量\r\n * @returns {Promise} 返回害虫列表和分页信息\r\n */\r\nexport const getPestList = (params = {}) => {\r\n  return new Promise((resolve, reject) => {\r\n    uni.request({\r\n      url: `${BASE_URL}/${API_VERSION}/pest`,\r\n      method: 'GET',\r\n      data: params,\r\n      header: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${uni.getStorageSync('token') || ''}`\r\n      },\r\n      success: (res) => {\r\n        if (res.statusCode === 200) {\r\n          // 直接返回后端数据\r\n          resolve(res.data);\r\n        } else {\r\n          reject(new Error(res.data.message || '获取害虫列表失败'));\r\n        }\r\n      },\r\n      fail: (err) => {\r\n        reject(new Error('网络请求失败'));\r\n      }\r\n    });\r\n  });\r\n};\r\n\r\n/**\r\n * 获取害虫图片URL\r\n * @param {String} imageName - 图片文件名\r\n * @returns {String} 返回完整的图片URL\r\n */\r\nexport const getImageUrl = (imageName) => {\r\n  if (!imageName) return '';\r\n  return `${BASE_URL}/${API_VERSION}/pest/images/${imageName}`;\r\n};\r\n\r\nexport default {\r\n  getPestList,\r\n  getImageUrl\r\n}; "],"names":["uni"],"mappings":";;AAMA,MAAM,WAAW;AACjB,MAAM,cAAc;AASR,MAAC,cAAc,CAAC,SAAS,OAAO;AAC1C,SAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACtCA,kBAAAA,MAAI,QAAQ;AAAA,MACV,KAAK,GAAG,QAAQ,IAAI,WAAW;AAAA,MAC/B,QAAQ;AAAA,MACR,MAAM;AAAA,MACN,QAAQ;AAAA,QACN,gBAAgB;AAAA,QAChB,iBAAiB,UAAUA,cAAG,MAAC,eAAe,OAAO,KAAK,EAAE;AAAA,MAC7D;AAAA,MACD,SAAS,CAAC,QAAQ;AAChB,YAAI,IAAI,eAAe,KAAK;AAE1B,kBAAQ,IAAI,IAAI;AAAA,QAC1B,OAAe;AACL,iBAAO,IAAI,MAAM,IAAI,KAAK,WAAW,UAAU,CAAC;AAAA,QACjD;AAAA,MACF;AAAA,MACD,MAAM,CAAC,QAAQ;AACb,eAAO,IAAI,MAAM,QAAQ,CAAC;AAAA,MAC3B;AAAA,IACP,CAAK;AAAA,EACL,CAAG;AACH;AAOY,MAAC,cAAc,CAAC,cAAc;AACxC,MAAI,CAAC;AAAW,WAAO;AACvB,SAAO,GAAG,QAAQ,IAAI,WAAW,gBAAgB,SAAS;AAC5D;;;"}